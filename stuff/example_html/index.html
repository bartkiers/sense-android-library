<!DOCTYPE HTML>
<html>
    <head>
        <meta name="viewport" content="width=320; user-scalable=no" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
            <title>PhoneGap</title>
            <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8">
                <script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>
                <script type="text/javascript" charset="utf-8" src="sense_platform.js"></script>
                </head>
    <body onload="document.addEventListener('deviceready', function(){
        window.plugins.sense.init();
        }, false);" id="stage" class="theme">
        <h1>Welcome to Sense's plugin!</h1>
        <h2>this file is located at /www/index.html</h2> 
        <a class="btn large" onclick="window.plugins.sense.changeLogin(
            'foo', 'bar',
            function(r){
            alert('Logged in');
            },
            function(e){
            alert('login failed: ' + e);
            });">Login as 'foo' / 'bar'</a>
        <a class="btn large" onclick="window.plugins.sense.register(
            'username', 'password', 'first name', 'surname', 'email', 'phone',
            function(r){console.log('register result: ' + r)},
            function(e){console.log('register error: ' + e)});">Register user 'username'</a>
        
        <a class="btn small" onclick="window.plugins.sense.toggleMain(
            true,
            function(r){console.log('startSense result: ' + r)},
            function(e){console.log('startSense error: ' + e)});">Start sensing</a>
        <a class="btn small" onclick="window.plugins.sense.toggleMain(
            false,
            function(r){console.log('stopSense result: ' + r)},
            function(e){console.log('stopSense error: ' + e)});">Stop sensing</a>   
        
        <a class="btn small" onclick="window.plugins.sense.togglePhoneState(
            true,
            function(r){console.log('start phone state result: ' + r)},
            function(e){console.log('start phone state error: ' + e)});">Start phone state sensors</a>        
        <a class="btn small" onclick="window.plugins.sense.togglePhoneState(
            false,
            function(r){console.log('stop phone state result: ' + r)},
            function(e){console.log('stop phone state error: ' + e)});">Stop phone state sensors</a>
        
        <a class="btn small" onclick="window.plugins.sense.togglePosition(
            true,
            function(r){console.log('start position result: ' + r)},
            function(e){console.log('start position error: ' + e)});">Start position sensors</a> 
        <a class="btn small" onclick="window.plugins.sense.togglePosition(
            false,
            function(r){console.log('stop position result: ' + r)},
            function(e){console.log('stop position error: ' + e)});">Stop position sensors</a>  
        
        <a class="btn small" onclick="window.plugins.sense.toggleAmbience(
            true,
            function(r){console.log('start ambience result: ' + r)},
            function(e){console.log('start ambience error: ' + e)});">Start ambience sensors</a> 
        <a class="btn small" onclick="window.plugins.sense.toggleAmbience(
            false,
            function(r){console.log('stop ambience result: ' + r)},
            function(e){console.log('stop ambience error: ' + e)});">Stop ambience sensors</a>  
        
        <a class="btn small" onclick="window.plugins.sense.toggleMotion(
            true,
            function(r){console.log('start motion result: ' + r)},
            function(e){console.log('start motion  error: ' + e)});">Start motion sensors</a>
        <a class="btn small" onclick="window.plugins.sense.toggleMotion(
            false,
            function(r){console.log('stop motion result: ' + r)},
            function(e){console.log('stop motion  error: ' + e)});">Stop motion sensors</a>
        
        <a class="btn small" onclick="window.plugins.sense.toggleNeighDev(
            true,
            function(r){console.log('start neighboring devices result: ' + r)},
            function(e){console.log('start neighboring devices error: ' + e)});">Start sensing neighboring devices</a>
        <a class="btn small" onclick="window.plugins.sense.toggleNeighDev(
            false,
            function(r){console.log('stop neighboring devices result: ' + r)},
            function(e){console.log('stop neighboring devices error: ' + e)});">Stop sensing neighboring devices</a>
        
        <a class="btn small" onclick="window.plugins.sense.toggleExternal(
            true,
            function(r){console.log('start external result: ' + r)},
            function(e){console.log('start external error: ' + e)});">Start external sensors</a>
        <a class="btn small" onclick="window.plugins.sense.toggleExternal(
            false,
            function(r){console.log('stop external result: ' + r)},
            function(e){console.log('stop external error: ' + e)});">Stop external sensors</a>
            
         <a class="btn large" onclick="window.plugins.sense.getData('pgsensor',
            function(r){
            var output = '';
            for (var i=0; i<r.length; i++) {
                var dataPoint = r[i];
                output += '\n' + i + ': ' + dataPoint['value']+';';
            }
            alert('\'pgsensor\' data: ' + output);
            },
            function(e){console.log('getData error: ' + e)});">Get 'pgsensor' data</a>
            
         <a class="btn large" onclick="window.plugins.sense.addDataPoint('pgsensor', 
            'PhoneGap sensor', 'PhoneGap', 'string', 'foo', new Date().getTime(), 
            function(r){
            alert('Data point stored');
            },
            function(e){console.log('addDataPoint error: ' + e)});">Add data for 'pgsensor'</a>    
            
        <a class="btn large" onclick="window.plugins.sense.getStatus(
            function(r){
            console.log('getStatus result: ' + r);
            var isRunning = (r && SensePlatform.STATUSCODE_RUNNING > 0);
            var isLoggedIn = (r && SensePlatform.STATUSCODE_CONNECTED > 0);
            var isSensingMotion = (r && SensePlatform.STATUSCODE_MOTION > 0);
            var isSensingAmbience = (r && SensePlatform.STATUSCODE_AMBIENCE > 0);
            if (isRunning && isLoggedIn) {
            alert('Sense Platform is active');
            } else if (!isLoggedIn) {
            alert('Sense Platform is not logged in');
            } else {
            alert('Sense Platform is not running');
            }
            // etc
            },
            function(e){console.log('getStatus error: ' + e)});">Get status</a>
        <a class="btn large" onclick="window.plugins.sense.getSessionId(
            function(r){
            alert('CommonSense session ID: ' + r);
            },
            function(e){console.log('getSessionId error: ' + e)});">Get session ID</a>     
        <div id="viewport" class="viewport" style="display: none;">       
            <img style="width:60px;height:60px" id="test_img" src="" alt="" />
        </div> 
    </body>
</html>
